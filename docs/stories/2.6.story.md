# Story 2.6: Add Basic User Progress Tracking

## Status
Draft

## Story
**As a** user,
**I want** to track my automation implementation progress and see my achievements,
**so that** I can measure the impact of automations on my business

## Acceptance Criteria
1. Progress dashboard shows automation implementation status
2. Time and revenue savings are tracked and displayed
3. Implementation progress for each automation is saved
4. Achievement badges are awarded for milestones
5. Weekly/monthly progress reports are generated
6. ROI calculator shows actual vs estimated benefits
7. Progress data feeds into future personalization
8. Users can add feedback and ratings for completed automations

## Tasks / Subtasks
- [ ] Create progress tracking service (AC: 1, 3)
  - [ ] Build ProgressTracker class
  - [ ] Implement automation status updates
  - [ ] Track step completion within automations
  - [ ] Calculate overall progress metrics
- [ ] Build progress dashboard (AC: 1, 2)
  - [ ] Create /progress route
  - [ ] Build ProgressDashboard component
  - [ ] Display automation status cards
  - [ ] Show time/revenue savings summary
- [ ] Implement metrics calculation (AC: 2, 6)
  - [ ] Track actual time saved per automation
  - [ ] Calculate revenue impact
  - [ ] Compare actual vs estimated benefits
  - [ ] Build ROI calculator component
- [ ] Add achievement system (AC: 4)
  - [ ] Define achievement criteria
  - [ ] Create badge components
  - [ ] Build achievement unlocking logic
  - [ ] Display achievement gallery
- [ ] Create progress reports (AC: 5)
  - [ ] Generate weekly progress summaries
  - [ ] Build monthly achievement reports
  - [ ] Create email report templates
  - [ ] Add PDF export for reports
- [ ] Build feedback system (AC: 8)
  - [ ] Create automation rating component
  - [ ] Add feedback form for completed automations
  - [ ] Store user feedback in database
  - [ ] Display ratings in automation library
- [ ] Update personalization data (AC: 7)
  - [ ] Feed progress data to personalization engine
  - [ ] Update user preferences based on completion rates
  - [ ] Adjust future recommendations
  - [ ] Track success patterns
- [ ] Add step-by-step tracking (AC: 3)
  - [ ] Create step completion checkboxes
  - [ ] Save progress for incomplete automations
  - [ ] Add notes for each step
  - [ ] Calculate completion percentage

## Dev Notes
### Progress Tracking Data Structure
[Source: architecture/8-database-schema.md]

Uses these tables:
- `user_automations`: Overall automation status
- `automation_progress`: Step-by-step tracking

```typescript
interface UserAutomationProgress {
  id: string;
  userId: string;
  automationId: string;
  status: 'saved' | 'in_progress' | 'completed' | 'dismissed';
  actualTimeSaved: number; // hours/week
  actualRevenueImpact: number; // $/month
  feedback: string;
  rating: number; // 1-5 stars
  startedAt: Date;
  completedAt?: Date;
  steps: StepProgress[];
}

interface StepProgress {
  stepId: string;
  completed: boolean;
  notes: string;
  completedAt?: Date;
}
```

### Progress Dashboard Layout
```
app/progress/
â”œâ”€â”€ page.tsx              # Main progress dashboard
â””â”€â”€ [automationId]/
    â””â”€â”€ page.tsx          # Individual automation progress

components/progress/
â”œâ”€â”€ ProgressDashboard.tsx # Main dashboard
â”œâ”€â”€ AutomationCard.tsx    # Progress card per automation
â”œâ”€â”€ MetricsSummary.tsx    # Time/revenue metrics
â”œâ”€â”€ AchievementGallery.tsx # Badges display
â”œâ”€â”€ ProgressChart.tsx     # Visual progress tracking
â”œâ”€â”€ FeedbackModal.tsx     # Rating and feedback
â””â”€â”€ ROICalculator.tsx     # Actual vs estimated
```

### Achievement System
```typescript
const ACHIEVEMENTS = {
  'first-automation': {
    title: 'Getting Started',
    description: 'Completed your first automation',
    icon: 'ðŸŽ¯',
    criteria: { completedAutomations: 1 }
  },
  'time-saver': {
    title: 'Time Saver',
    description: 'Saved 10+ hours per week',
    icon: 'â°',
    criteria: { weeklyTimeSaved: 10 }
  },
  'efficiency-expert': {
    title: 'Efficiency Expert',
    description: 'Completed 5 automations',
    icon: 'ðŸ†',
    criteria: { completedAutomations: 5 }
  },
  'revenue-booster': {
    title: 'Revenue Booster',
    description: 'Generated $1000+ monthly impact',
    icon: 'ðŸ’°',
    criteria: { monthlyRevenue: 1000 }
  }
};
```

### Progress Calculation
```typescript
class ProgressTracker {
  calculateUserMetrics(userId: string) {
    const completedAutomations = await this.getCompletedAutomations(userId);
    
    return {
      totalTimeSaved: completedAutomations.reduce((sum, auto) => 
        sum + (auto.actualTimeSaved || auto.estimatedTimeSaved), 0),
      totalRevenueImpact: completedAutomations.reduce((sum, auto) => 
        sum + (auto.actualRevenueImpact || auto.estimatedRevenueImpact), 0),
      completionRate: completedAutomations.length / this.getTotalStarted(userId),
      averageRating: this.calculateAverageRating(completedAutomations)
    };
  }
}
```

### ROI Calculator
```typescript
const ROICalculator = ({ automation, userProgress }) => {
  const estimated = {
    timeSaved: automation.timeSaved,
    revenueImpact: automation.revenueImpact
  };
  
  const actual = {
    timeSaved: userProgress.actualTimeSaved,
    revenueImpact: userProgress.actualRevenueImpact
  };
  
  const accuracy = {
    time: actual.timeSaved / estimated.timeSaved,
    revenue: actual.revenueImpact / estimated.revenueImpact
  };
  
  return (
    <div className="roi-calculator">
      <MetricComparison 
        label="Time Saved"
        estimated={estimated.timeSaved}
        actual={actual.timeSaved}
        accuracy={accuracy.time}
      />
      <MetricComparison 
        label="Revenue Impact"
        estimated={estimated.revenueImpact}
        actual={actual.revenueImpact}
        accuracy={accuracy.revenue}
      />
    </div>
  );
};
```

### Progress Reports
Weekly email template:
```typescript
const WeeklyProgressEmail = ({ user, progress }) => (
  <div>
    <h1>Your Weekly Progress Report</h1>
    <div className="metrics">
      <Metric label="Automations Completed" value={progress.completed} />
      <Metric label="Time Saved" value={`${progress.timeSaved}h`} />
      <Metric label="Revenue Impact" value={`$${progress.revenue}`} />
    </div>
    <div className="achievements">
      {progress.newAchievements.map(achievement => 
        <AchievementBadge key={achievement.id} achievement={achievement} />
      )}
    </div>
  </div>
);
```

### Step-by-Step Tracking UI
```typescript
const StepTracker = ({ automation, userProgress }) => {
  return (
    <div className="step-tracker">
      {automation.steps.map((step, index) => {
        const stepProgress = userProgress.steps.find(s => s.stepId === step.id);
        return (
          <div key={step.id} className="step-item">
            <Checkbox 
              checked={stepProgress?.completed || false}
              onChange={(checked) => updateStepProgress(step.id, checked)}
            />
            <div className="step-content">
              <h4>{step.title}</h4>
              <p>{step.instructions}</p>
              {stepProgress?.completed && (
                <Badge>Completed {stepProgress.completedAt}</Badge>
              )}
            </div>
          </div>
        );
      })}
    </div>
  );
};
```

### Testing
- Test progress calculation accuracy
- Verify achievement unlocking logic
- Check step-by-step tracking works
- Test feedback and rating system
- Validate ROI calculator
- Check report generation

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-17 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

## QA Results
_To be filled by QA agent_